<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Hydrocabon Creator</title>
</head>
<body>
<h1>Hydrocarbon Diagrams</h1>
<canvas id="canvas" width="1000" height="500" style="border: 1px solid black"></canvas>
	<script>
	// right carbon to hydrogen bond needs work
	// double bonds/ triple hydrogen up down needs work
	// ***********************************************
	// Set up Canvas
	var canvas, context;
	canvas = document.getElementById("canvas");
	context = canvas.getContext("2d");
	
	// Declare Variables	
	var CarbonBonds=[1,1,1,1,1,1,1,1,1,1];
	var CarbonLength = 5;
	var CarbonMax = 8;	
	// var CarbonMax = 6;
	var DownHydrogenBonds=[1,1,2,3,4,5,1,1,1,1];
	
	var GraphicIndent = 100;
	var GraphicMiddle = 250;
	var UpHydrogenBonds=[1,2,3,4,5,6,7,8,1,1];	
		
		
		// Declare Images
	var Background = new Image();
	Background.src = 'Background-500-800.png';
	var BondDouble = new Image();
	BondDouble.src = 'BondDouble.png';
	var BondSingle = new Image();
	BondSingle.src = 'BondSingle.png';
	var BondTriple = new Image();
	BondTriple.src = 'BondTriple.png';
	var BromineImage = new Image();
	BromineImage.src = 'Bromine.png';
	var CarbonImage = new Image();
	CarbonImage.src = 'Carbon.png';
	var ChlorineImage = new Image();
	ChlorineImage.src = 'Chlorine.png';
	var FlourineImage = new Image();
	FlourineImage.src = 'Flourine.png';
	var HydrogenImage = new Image();
	HydrogenImage.src = 'Hydrogen.png';
	var IodineImage = new Image();
	IodineImage.src = 'Iodine.png';	
	var DownMethylImage = new Image();
	DownMethylImage.src = 'DownMethyl.png';
	var DownEthylImage = new Image();
	DownEthylImage.src = 'DownEthyl.png';
	var DownButylImage = new Image();
	DownButylImage.src = 'DownButyl.png';
	var UpMethylImage = new Image();
	UpMethylImage.src = 'UpMethyl.png';
	var UpEthylImage = new Image();
	UpEthylImage.src = 'UpEthyl.png';
	var UpButylImage = new Image();
	UpButylImage.src = 'UpButyl.png';
		

	

	// ***********************************************
	window.onload = function() {
		canvas = document.getElementById("canvas");
		context = canvas.getContext("2d");
		_DrawImage();
		_MouseEvents();
	}
	
	// *******************************************
	function _MouseEvents() {
		canvas.onmousedown = function(e) {
			var mouseX = e.pageX - this.offsetLeft;
			var mouseY = e.pageY - this.offsetTop;
			
			console.log('x, y: ' + mouseX + ', '+ mouseY);
			// If click on left carbon then change the length of the chain
			// If to check if the mouse click was on the carbon Y-coord
			if (mouseY >= (GraphicMiddle-HydrogenImage.height/2) && mouseY <= (GraphicMiddle+HydrogenImage.height/2)) {
				// If to determine number of carbon clicked, count left to right, if first carbon increase the chain length
				if (mouseX >= (GraphicIndent) && mouseX <= (GraphicIndent + CarbonImage.width)) {
					// If the left carbon is clicked increase the number of carbons in the main chain
					CarbonLength++;
					if(CarbonLength>CarbonMax){
						CarbonLength=1;
					}	
				}
				// If to determine which carbon was clicked
				var CurrentCarbon = (Math.floor((mouseX-GraphicIndent)/CarbonImage.width+1));
	console.log("C = " + CurrentCarbon);
				if(CurrentCarbon <= CarbonLength && CurrentCarbon > 1){
	//console.log("C2 = " + CurrentCarbon +' Bond: '+CarbonBonds[CurrentCarbon-1]);
					// change the bond to the left +1
					if (CarbonBonds[CurrentCarbon-1] <= 3){
						CarbonBonds[CurrentCarbon-1]++;
						console.log('Carbon bond '+(CurrentCarbon-1)+'changed');
					}
					// if bonds > 4 cycle back to single
					if (CarbonBonds[CurrentCarbon-1] > 3){
						CarbonBonds[CurrentCarbon-1] = 1;
					}
					//*****************************************
					// change hydrogen bonds
				} else if (CurrentCarbon == 0){
					//  If left most carbon chain, ie. left hydrogen
					CarbonBonds[0]++;
					console.log('Carbon bonds [0] = '+CarbonBonds[0]);
					if (CarbonBonds[0] > 5){
						CarbonBonds[0] = 0;
					}
				} else if (CurrentCarbon == CarbonLength+1){
					// If CarbonLength+1 change CarbonMax+1, right hydrogen
					CarbonBonds[CarbonMax+1]++;
					
					if (CarbonBonds[CarbonMax+1]>5){
						CarbonBonds[CarbonMax+1]=0;
					}
				}
				// *******************************************
			}
			// Change top hydrogen to different atoms
			if ((mouseY >= GraphicMiddle - BondSingle.height - HydrogenImage.height/2) && (mouseY <= GraphicMiddle - BondSingle.height + HydrogenImage.height/2)) {
				
				var CurrentHydrogen = (Math.floor((mouseX-GraphicIndent)/HydrogenImage.width));
				if(CurrentHydrogen <= CarbonLength){
					console.log('click top hydrogen ' + CurrentHydrogen + " VAlue: "+UpHydrogenBonds[CurrentHydrogen]);
					UpHydrogenBonds[CurrentHydrogen]++;
					if (UpHydrogenBonds[CurrentHydrogen] > (CarbonMax) ){
						UpHydrogenBonds[CurrentHydrogen]=0;
					}
				}
			}
			// Change bottom hydrogen to different atoms
			if ((mouseY >= GraphicMiddle + BondSingle.height - HydrogenImage.height/2) && (mouseY <= GraphicMiddle + BondSingle.height + HydrogenImage.height/2)) {
				
				var CurrentHydrogen = (Math.floor((mouseX-GraphicIndent)/HydrogenImage.width));
				if(CurrentHydrogen <= CarbonLength){
					console.log('click bottom hydrogen ' + CurrentHydrogen + " Value: "+DownHydrogenBonds[CurrentHydrogen]);
					DownHydrogenBonds[CurrentHydrogen]++;
					if (DownHydrogenBonds[CurrentHydrogen] > (CarbonMax) ){
						DownHydrogenBonds[CurrentHydrogen]=0;
					}
				}
			}
		_DrawImage();
		}
	}
		
	// *******************************************
	function _DrawVertBond(Bond_X, Bond_Y, Image){
		// Rotate the single bond and draw it vertically
		context.save();
		context.translate(Bond_X, Bond_Y);
		context.rotate(90 * Math.PI / 180);
		context.drawImage(Image, 0, 0);
		context.restore;
		context.setTransform(1, 0, 0, 1, 0, 0);
	}
	// *******************************************		
	function _FindBranchImage(i){
		var TempImage = new Image();
		switch (i){
			case(1):
				TempImage = HydrogenImage;
			break;
			case(2):
				TempImage = BromineImage;
			break;
			case(3):
				TempImage = ChlorineImage;
			break;
			case(4):
				TempImage = FlourineImage;
			break;
			case(5):
				TempImage = IodineImage;
			break;
			case(6):
				TempImage = UpMethylImage;
			break;
			case(7):
				TempImage = UpEthylImage;
			break;
			case(8):
				TempImage = UpButylImage;
			break;
		}
		return(TempImage);
	}
	
	// *******************************************		
	function _FindBranchDownImage(i){
		var TempImage = new Image();
		switch (i){
			case(1):
				TempImage = HydrogenImage;
			break;
			case(2):
				TempImage = BromineImage;
			break;
			case(3):
				TempImage = ChlorineImage;
			break;
			case(4):
				TempImage = FlourineImage;
			break;
			case(5):
				TempImage = IodineImage;
			break;
			case(6):
				TempImage = DownMethylImage;
			break;
			case(7):
				TempImage = DownEthylImage;
			break;
			case(8):
				TempImage = DownButylImage;
			break;
		}
		return(TempImage);
	}
		
	// *******************************************	
	function _DrawImage() {
		// Draw background
		context.drawImage(Background,0,0);
		// Draw main chain bonds
		for (var i=1; i < CarbonLength; i++){
			//if (i==0 && CarbonBonds[i]!=0){
				//context.drawImage(BondSingle, i*BondSingle.width+BondSingle.width/2, GraphicMiddle-BondSingle.height/2);
			//} else 
			if (CarbonBonds[i] == 1){
				// If single bond
				context.drawImage(BondSingle, i*BondSingle.width+BondSingle.width/2, GraphicMiddle-BondSingle.height/2);
			} else if (CarbonBonds[i] == 2){
				// If triple bond draw triple bond
				context.drawImage(BondDouble, i*BondTriple.width+BondTriple.width/2, GraphicMiddle-BondTriple.height/2);
			} else if (CarbonBonds[i] == 3){
				// If triple bond draw triple bond
				context.drawImage(BondTriple, i*BondTriple.width+BondTriple.width/2, GraphicMiddle-BondTriple.height/2);
			}
		}

		
		// Draw hydrogens
		// draw the first (left) hydrogen
		if (CarbonBonds[0]!=0){
			// Draw the left most bond for hydrogen
			//context.drawImage(BondSingle, (CarbonLength)*BondSingle.width+BondSingle.width/2, GraphicMiddle-BondSingle.height/2);
			context.drawImage(BondSingle, BondSingle.width/2, GraphicMiddle-BondSingle.height/2);
			var TempImage = new Image();
			TempImage = _FindBranchImage(CarbonBonds[0]);
			
			console.log('Draw CarbonBonds[0]= '+CarbonBonds[0]+' Image: '+TempImage.src);
			context.drawImage(TempImage, 0, GraphicMiddle-HydrogenImage.height/2);
		}
		// **********************************************
		// draw the last right(last) hydrogne
		if (CarbonBonds[CarbonMax+1]!=0){
			// Draw the right most bond for hydrogen
			context.drawImage(BondSingle, (CarbonLength)*BondSingle.width+BondSingle.width/2, GraphicMiddle-BondSingle.height/2);
			var TempImage = new Image();
			TempImage = _FindBranchImage(CarbonBonds[CarbonMax+1]);
			context.drawImage(TempImage, (CarbonLength+1)*HydrogenImage.width, GraphicMiddle-HydrogenImage.height/2);
		}

		// Draw up and down hydrogens
		for (var i=0; i < CarbonLength; i++){
			// Draw up bonds
			// if the carbonbond = 1 single bond; carbonbond = 2 double bond  draw the up bond and then draw the hydrogen
	
			if (UpHydrogenBonds[i]!=0){
				_DrawVertBond(i*CarbonImage.width+HydrogenImage.width*2, GraphicMiddle-BondSingle.height,BondSingle);
				// Draw up hydrogens
				var TempImage = new Image();
				
				TempImage = _FindBranchImage(UpHydrogenBonds[i]);
				if (UpHydrogenBonds[i]>5){
					context.drawImage(TempImage, i*HydrogenImage.width + GraphicIndent - 12, GraphicMiddle - BondSingle.height-HydrogenImage.height-100);
				} else{
				    context.drawImage(TempImage, i*HydrogenImage.width + GraphicIndent, GraphicMiddle-BondSingle.height-HydrogenImage.height/2);
				}
			}
			// Draw down bonds 

			if (DownHydrogenBonds[i]!=0){
				_DrawVertBond(i*CarbonImage.width + HydrogenImage.width + GraphicIndent,GraphicMiddle, BondSingle);
				// Draw down hydrogens
				// Draw up hydrogens
				var TempImage = new Image();
				TempImage = _FindBranchDownImage(DownHydrogenBonds[i]);
				//context.drawImage(TempImage, i*HydrogenImage.width + GraphicIndent, GraphicMiddle+BondSingle.height/2);	
				if (DownHydrogenBonds[i]>5){
					context.drawImage(TempImage, i*HydrogenImage.width + GraphicIndent - 12, GraphicMiddle + BondSingle.height-HydrogenImage.height+60);
				} else{
				    context.drawImage(TempImage, i*HydrogenImage.width + GraphicIndent, GraphicMiddle+BondSingle.height-HydrogenImage.height/2);
				}
			}

			// Draw main carbons
			context.drawImage(CarbonImage, i*CarbonImage.width+GraphicIndent, GraphicMiddle-CarbonImage.height/2);
			// console.log("Carbon "+i);
		}
	}
	</script>
</body>
</html>
